<script lang="ts">
    import { createEventDispatcher } from "svelte"
    import type { Input } from "../../../types/Input"
    import MaterialCheckbox from "../inputs/MaterialCheckbox.svelte"
    import MaterialDropdown from "../inputs/MaterialDropdown.svelte"
    import { commonInputs } from "./inputs"
    import { translateText } from "../../utils/language"

    export let input: Input

    $: label = input.label ?? input.name ?? ""

    let dispatch = createEventDispatcher()
    function changed(e: any) {
        let value = e.detail
        dispatch("change", value)
    }
</script>

{#if input.type === "dropdown"}
    <MaterialDropdown {label} value={input.value} options={input.options?.map((a) => ({ ...a, label: translateText(a.label) }))} style={input.style || ""} on:change={changed} />
{:else if input.type === "checkbox"}
    <MaterialCheckbox {label} checked={input.value} style="flex: 1;{input.style || ''}" on:change={changed} />
{:else}
    <svelte:component this={commonInputs[input.type]} {label} value={input.value} style={input.style || ""} {...input.settings || {}} on:change={changed} />
{/if}
