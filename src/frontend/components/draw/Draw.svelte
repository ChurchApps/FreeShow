<script lang="ts">
    import { draw, drawSettings, drawTool } from "../../stores"
    import Fill from "./Fill.svelte"
    import Paint from "./Paint.svelte"
    import Particles from "./Particles.svelte"

    $: tool = $drawTool
    $: settings = $drawSettings[tool]
</script>

{#if tool === "fill"}
    <Fill {settings} />
{:else if tool === "paint"}
    <Paint {settings} />
{:else if $draw !== null}
    {#if tool === "focus"}
        <div
            class="focus"
            style="left: {$draw.x}px;top: {$draw.y}px;opacity: {settings?.opacity};border-radius: {settings?.radius}%;width: {settings?.size}px;height: {settings?.size}px;box-shadow: 0 0 0 50000px {settings?.color}{settings?.glow
                ? `, inset 0 0 ${settings?.size / 3}px ${settings?.color}`
                : ''};"
        />
    {:else if tool === "pointer"}
        <div
            class="point"
            class:hollow={settings?.hollow === true}
            style="left: {$draw.x}px;top: {$draw.y}px;--color: {settings?.color};border-radius: {settings?.radius}%;opacity: {settings?.opacity};width: {settings?.size}px;height: {settings?.size}px;{settings?.glow
                ? `box-shadow: 0 0 ${settings?.size / 5}px ${settings?.size / 20}px ${settings?.color}`
                : ''}"
        />
    {:else if tool === "particles"}
        <Particles {settings} />
    {/if}
{/if}

<!-- zoom is directly used in <Zoomed /> -->

<style>
    .point {
        --color: red;
        position: absolute;
        width: 50px;
        height: 50px;
        background-color: var(--color);
        border: 4px solid var(--color);
        border-radius: 50%;
        opacity: 0.8;
    }
    .point.hollow {
        background-color: transparent;
    }

    .focus {
        position: absolute;
        width: 300px;
        height: 300px;
        background-color: transparent;
        border-radius: 50%;
        opacity: 0.8;
        box-shadow: 0 0 0 50000px black;
    }
</style>
